<!DOCTYPE html>
<html>
<head>
	<title>CARTEIRA BCC MANAUS - ARTHUR P&P</title>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://www.claro.com.br/favicon.ico"rel="icon"/>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"  crossorigin=""/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.3/css/bootstrap.min.css" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.3.0/dist/MarkerCluster.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.3.0/dist/MarkerCluster.Default.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"  crossorigin=""></script>
    <script src="https://unpkg.com/leaflet.markercluster@1.3.0/dist/leaflet.markercluster.js"></script>
    <script src="https://unpkg.com/leaflet-kmz@latest/dist/leaflet-kmz.js"></script>

   <script src="https://xtk93x.github.io/Leaflet.TileLayer.ColorFilter/leaflet-tilelayer-colorfilter.min.js"></script>



   
<style>
body,html{height:100%;margin:0}#map{position:absolute;z-index:1;top:0;bottom:0;width:100%}.icon_map{filter:drop-shadow(0 2px 2px rgba(0,0,0,.1)) drop-shadow(0 -1px 1px rgba(0,0,0,.12))}.botao{z-index:1001;margin:25px 5px}.botao .perso{margin-left:5px;border-radius:4px;padding:5px 12px;background-color:#000;border:2px solid #0a0a0a;text-align:center;text-decoration:none;color:#fff;-webkit-box-shadow:0 2px 2px 0 rgb(0 0 0 / 14%),0 3px 1px -2px rgb(0 0 0 / 12%),0 1px 5px 0 rgb(0 0 0 / 20%);box-shadow:0 2px 2px 0 rgb(0 0 0 / 14%),0 3px 1px -2px rgb(0 0 0 / 12%),0 1px 5px 0 rgb(0 0 0 / 20%)}.leaflet-bottom,.leaflet-top{position:absolute;z-index:1000;pointer-events:auto!important;margin-top:14px;line-height:32px}.legend{padding:5px 5px 5px 5px;font:14px/24px Arial,Helvetica,sans-serif;background:#fff;box-shadow:0 0 15px rgb(0 0 0 / 20%);border-radius:5px;color:#555}.legend h4{text-align:center;font-size:16px;margin:2px 10px 10px;color:#000}.legend span{position:relative;bottom:0;color:#000}.legend i{width:28px;height:24px;float:left;margin:0 8px 0 0;opacity:.9}.legend i.icon{background-size:18px;background-color:#fff}.rolagem{overflow-x: auto;height: 598px;}}
</style>
</head>
<body>
<div>
</div>
<div class="tamanho_mapa">
<div id='map'>	
</div>
</div>
<div class="agrupar" id="agrupar"></div>
<button onclick="moveMapRight()">Mover mapa para a direita</button>
<script>




var map = L.map('map').setView([-3.0890875,-60.0050051], 13);

      var markers = L.markerClusterGroup({
	disableClusteringAtZoom: 10,
      	markerDistance : 50  

});

    //   // camada clara 
    // let myFilter = [
    // 'grayscale:100%'
    // ];

    // L.tileLayer.colorFilter('https://{s}.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}{r}.png', {
	// attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors P&P RNO',
	// filter: myFilter,
	// }).addTo(map);

// fim camada clara
      

       	// Satelite Layer
       //Hybrid: s,h;
      //Satellite: s;
     //Streets: m;
    //Terrain: p;


     //camada googleSat

// googleSat = L.tileLayer('http://{s}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}',{
//    maxZoom: 21,
//    subdomains:['mt0','mt1','mt2','mt3'],
//   attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors P&P RNO'
//  });
// googleSat.addTo(map);


// fim googleSat

//INICIO SELETOR DE MAPA
var basemaps = {
    Mapa_Claro: L.tileLayer.wms('https://tile.openstreetmap.de/{z}/{x}/{y}.png', {
        layers: 'Mapa Branco'
    }),

    Mapa_Satelite: L.tileLayer.wms('http://{s}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}', {
        layers: 'Mapa Satelite',
        subdomains:['mt0','mt1','mt2','mt3']
    })

    
};

L.control.layers(basemaps).addTo(map);

basemaps.Mapa_Claro.addTo(map);

//FIM SELETOR DE MAPA

	// 	L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {
	// 	attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors P&P RNO'
	// }).addTo(map);


    var LeafIcon_GG_2G = L.Icon.extend({
	options: {	
	iconSize:     [45,45], // tamanho do icone
    popupAnchor:  [-3,-3], // ponto a partir do qual o pop-up deve ser aberto em relação ao iconAnchor
	className: 'icon_map'	
	}
	});
	var LeafIcon_GG_3G = L.Icon.extend({
	options: {	
	iconSize:     [45,45], // tamanho do icone
    popupAnchor:  [-3,-3], // ponto a partir do qual o pop-up deve ser aberto em relação ao iconAnchor
	className: 'icon_map'	
	}
	});
	var LeafIcon_GG_4G = L.Icon.extend({
	options: {	
	iconSize:     [45,45], // tamanho do icone
    popupAnchor:  [-3,-3], // ponto a partir do qual o pop-up deve ser aberto em relação ao iconAnchor
	className: 'icon_map'	
	}
	});
	var LeafIcon_GG_5G = L.Icon.extend({
	options: {	
	iconSize:     [45,45], // tamanho do icone
    popupAnchor:  [-3,-3], // ponto a partir do qual o pop-up deve ser aberto em relação ao iconAnchor
	className: 'icon_map'	
	}
	});
	var LeafIcon_GG_NF = L.Icon.extend({
	options: {	
	iconSize:     [45,45], // tamanho do icone
    popupAnchor:  [-3,-3], // ponto a partir do qual o pop-up deve ser aberto em relação ao iconAnchor
	className: 'icon_map'	
	}
	});
CLARO = new LeafIcon_GG_2G({iconUrl: 'https://cdn.mapmarker.io/api/v1/font-awesome/v5/pin?text=1&size=120&background=1E90FF&color=FFF&hoffset=-1'});  // Azul
VIVO = new LeafIcon_GG_2G({iconUrl: 'https://cdn.mapmarker.io/api/v1/font-awesome/v5/pin?text=2&size=120&background=32CD32&color=FFF&hoffset=-1'});  // Verde
TIM = new LeafIcon_GG_2G({iconUrl: 'https://cdn.mapmarker.io/api/v1/font-awesome/v5/pin?text=3&size=120&background=FF6347&color=FFF&hoffset=-1'});  // Tomate
BRISANET = new LeafIcon_GG_2G({iconUrl: 'https://cdn.mapmarker.io/api/v1/font-awesome/v5/pin?text=4&size=120&background=FFD700&color=FFF&hoffset=-1'});  // Ouro
Carteira_5 = new LeafIcon_GG_2G({iconUrl: 'https://cdn.mapmarker.io/api/v1/font-awesome/v5/pin?text=5&size=120&background=20B2AA&color=FFF&hoffset=-1'});  // Verde mar
Carteira_6 = new LeafIcon_GG_2G({iconUrl: 'https://cdn.mapmarker.io/api/v1/font-awesome/v5/pin?text=6&size=120&background=FF1493&color=FFF&hoffset=-1'});  // Rosa profundo
Carteira_7 = new LeafIcon_GG_2G({iconUrl: 'https://cdn.mapmarker.io/api/v1/font-awesome/v5/pin?text=7&size=120&background=8A2BE2&color=FFF&hoffset=-1'});  // Azul violeta
Carteira_8 = new LeafIcon_GG_2G({iconUrl: 'https://cdn.mapmarker.io/api/v1/font-awesome/v5/pin?text=8&size=120&background=FF4500&color=FFF&hoffset=-1'});  // Laranja avermelhado
      
        map.addLayer(markers);
        var legend = L.control({ position: "topright" });




var markersLayer = L.markerClusterGroup({
    disableClusteringAtZoom: 10,
    markerDistance: 50
});

map.addLayer(markersLayer);

function carregarMarcadores(bounds) {
    // Limpa os marcadores antigos
    markersLayer.clearLayers();

    // Faz uma requisição para o arquivo JSON
    fetch("marcadores.json")
        .then(response => response.json())
        .then(data => {
            // Filtra os marcadores pela área visível
            var marcadoresVisiveis = data.filter(marcador => {
                return bounds.contains([marcador.lat, marcador.lng]);
            });

            // Adiciona os marcadores visíveis ao mapa
            marcadoresVisiveis.forEach(marcador => {
                var icone = eval(marcador.icon); // Obtém o ícone dinamicamente
                L.marker([marcador.lat, marcador.lng], { icon: icone })
                    .bindPopup(marcador.popup)
                    .addTo(markersLayer);
            });
        })
        .catch(error => console.error("Erro ao carregar marcadores:", error));
}

// Atualiza os marcadores sempre que o mapa é movido ou ampliado
map.on("moveend", function () {
    carregarMarcadores(map.getBounds());
});

// Carrega os marcadores na inicialização
carregarMarcadores(map.getBounds());





var legend = L.control({ position: "topright" });

legend.onAdd = function(map) {
  var div = L.DomUtil.create("div", "legend");
  div.innerHTML += "<h4>CARTEIRA BCC - MANAUS</h4>";
  div.innerHTML += '<i style="background: #1E90FF"></i><span>Carteira 1</span><br>';
  div.innerHTML += '<i style="background: #32CD32"></i><span>Carteira 2</span><br>';
  div.innerHTML += '<i style="background: #FF6347"></i><span>Carteira 3</span><br>';
  div.innerHTML += '<i style="background: #FFD700"></i><span>Carteira 4</span><br>';
  div.innerHTML += '<i style="background: #20B2AA"></i><span>Carteira 5</span><br>';
  div.innerHTML += '<i style="background: #FF1493"></i><span>Carteira 6</span><br>';
  div.innerHTML += '<i style="background: #8A2BE2"></i><span>Carteira 7</span><br>';
  div.innerHTML += '<i style="background: #FF4500"></i><span>Carteira 8</span><br>';


  return div;
};

legend.addTo(map);
L.Control.Watermark = L.Control.extend({
    onAdd: function(map) {
        var img = L.DomUtil.create('img');
        img.src = 'https://mondrian.claro.com.br/brands/nosvg/assinatura-claro.png';
        img.style.width = '40px';
        return img;
    },
    onRemove: function(map) {
    }
});
L.control.watermark = function(opts) {
    return new L.Control.Watermark(opts);
}
L.control.watermark({ position: 'bottomleft' }).addTo(map);


// Função para mover marcadores para a direita
function moveMarkersRight() {
    var offset = 0.001; // Valor do deslocamento longitudinal
    map.eachLayer(function(layer) {
        if (layer instanceof L.Marker) {
            var latLng = layer.getLatLng();
            layer.setLatLng([latLng.lat, latLng.lng + offset]);
        }
    });
}

// Função para mover marcadores para a esquerda
function moveMarkersLeft() {
    var offset = 0.001; // Valor do deslocamento longitudinal
    map.eachLayer(function(layer) {
        if (layer instanceof L.Marker) {
            var latLng = layer.getLatLng();
            layer.setLatLng([latLng.lat, latLng.lng - offset]);
        }
    });
}

// Adiciona os botões ao mapa
var buttonControl = L.control({ position: "topright" });
buttonControl.onAdd = function(map) {
    var div = L.DomUtil.create("div", "botao");
    div.style.display = "flex";
    div.style.flexDirection = "column";
    div.style.gap = "10px"; // Espaço entre os botões
    div.innerHTML = `
        <button class="btn btn-primary perso" onclick="moveMarkersRight()">Mover marcadores à direita</button>
        <button class="btn btn-secondary perso" onclick="moveMarkersLeft()">Mover marcadores à esquerda</button>
    `;
    return div;
};
buttonControl.addTo(map);
</script>




</script>
</body>
</html>

